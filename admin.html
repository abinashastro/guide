<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Astro Admin | Master Control</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<style>
body{background:#020617;color:white;font-family:Poppins;padding:20px}
.cardx{background:rgba(255,255,255,0.05);padding:20px;border-radius:15px;margin-bottom:20px;border:1px solid rgba(255,255,255,.1)}
h3{color:gold}
input,select{background:#0f172a;color:white;border:none;padding:10px;border-radius:10px;width:100%}
.btn-save{background:gold;border:none;padding:10px 20px;border-radius:10px;font-weight:bold;margin-top:10px}
.table{color:white}
</style>
</head>
<body>
<h2><i class="fa fa-crown text-warning"></i> ASTRO MASTER CONTROL PANEL</h2>
<div class="row">
<!-- CONTROL BOX -->
<div class="col-md-4">
<div class="cardx">
<h3>ðŸ’° Lock & Price Control</h3>
<option value="on">ON (Paid)</option>
<option value="off">OFF (Free)</option>
</select>
</div>
</div>
<!-- STATS -->
<div class="col-md-4">
<div class="cardx">
<h3>ðŸ“Š Live Stats</h3>
Total Leads: <b id="totalLeads">0</b><br><br>
System Status: <b id="statusShow">--</b>
</div>
</div>
<!-- LEADS -->
<div class="col-md-12">
<div class="cardx">
<h3>ðŸ‘¤ User Leads</h3>
<table class="table">
<thead>
<tr>
<th>Time</th>
<th>Name</th>
<th>DOB</th>
<th>M/B</th>
<th>Action</th>
</tr>
</thead>
<tbody id="leadTable"></tbody>
</table>
</div>
</div>
</div>
<script>

// SAVE SETTINGS
function saveSettings(){
let lock=document.getElementById("lockStatus").value;
let price=document.getElementById("priceSet").value;
let code=document.getElementById("vipCode").value;

localStorage.setItem("lockStatus",lock);
localStorage.setItem("price",price);
localStorage.setItem("vipcode",code);

alert("Settings Saved ðŸ˜ˆ");
loadSettings();
}

// LOAD SETTINGS
function loadSettings(){
let lock=localStorage.getItem("lockStatus")||"on";
let price=localStorage.getItem("price")||"49";
let code=localStorage.getItem("vipcode")||"astro49";

document.getElementById("lockStatus").value=lock;
document.getElementById("priceSet").value=price;
document.getElementById("vipCode").value=code;

document.getElementById("statusShow").innerText = lock=="on" ? "PAID MODE" : "FREE MODE";
}

// LOAD LEADS
function loadLeads(){
let leads=JSON.parse(localStorage.getItem("astroLeads"))||[];
document.getElementById("totalLeads").innerText=leads.length;

let html="";
leads.slice().reverse().forEach((l,i)=>{
html+=`<tr>
<td>${l.time}</td>
<td>${l.name}</td>
<td>${l.dob}</td>
<td>${l.mulank}/${l.bhagyank}</td>
<td>
<a target="_blank" href="https://wa.me/917008186187?text=Hi ${l.name}, your report ready" class="text-success me-2"><i class="fab fa-whatsapp"></i></a>
<i class="fa fa-trash text-danger" onclick="deleteLead(${i})"></i>
</td>
</tr>`;
});
document.getElementById("leadTable").innerHTML=html;
}

function deleteLead(i){
let leads=JSON.parse(localStorage.getItem("astroLeads"))||[];
leads.splice(leads.length-1-i,1);
localStorage.setItem("astroLeads",JSON.stringify(leads));
loadLeads();
}

function clearLeads(){
if(confirm("Delete all leads?")){
localStorage.removeItem("astroLeads");
loadLeads();
}
}

// INIT
loadSettings();
loadLeads();

</script>
</body>
</html>
