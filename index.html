<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astro Abhinash | Numerology Expert</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00f2ff; --gold: #ffd700; --danger: #ff4d4d; --success: #4ade80; --card-bg: rgba(255, 255, 255, 0.08); }
        body { margin: 0; font-family: 'Poppins', sans-serif; background: #020617; color: white; text-align: center; padding-bottom: 50px; }
        header { background: rgba(0, 0, 0, 0.9); padding: 15px; border-bottom: 2px solid var(--primary); font-weight: 700; position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); }
        .container { max-width: 600px; margin: auto; padding: 15px; }
        .box { background: var(--card-bg); backdrop-filter: blur(10px); border-radius: 20px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); }
        input, select { padding: 12px; width: 85%; border-radius: 10px; border: none; margin-bottom: 10px; font-weight: bold; outline: none; background: #1e293b; color: white; }
        
        .toggle-btn { background: var(--primary); color: #000; border: none; padding: 5px 15px; border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 12px; margin-top: 5px; }
        .calc-btn { padding: 15px 40px; border: none; border-radius: 50px; background: linear-gradient(45deg, var(--primary), #0066ff); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; width: 100%; margin-top: 10px; }
        .contact-btn { padding: 15px 40px; border: 2px solid var(--success); border-radius: 50px; background: rgba(74, 222, 128, 0.1); color: var(--success); font-weight: 700; cursor: pointer; text-decoration: none; display: block; margin: 20px auto; transition: 0.3s; }
        .contact-btn:hover { background: var(--success); color: black; }

        .alignment-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; }
        .align-card { background: rgba(0, 242, 255, 0.05); border: 1px solid var(--primary); border-radius: 15px; padding: 10px; }
        .align-val { font-size: 1.8rem; font-weight: 800; color: var(--primary); display: block; }
        .align-label { font-size: 9px; text-transform: uppercase; color: var(--gold); }
        .status-bar { padding: 8px; border-radius: 10px; font-size: 12px; font-weight: bold; margin-top: 10px; }
        
        .loshu-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 240px; margin: 15px auto; }
        .grid-cell { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; height: 75px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: bold; }
        .filled { border-color: var(--gold); background: rgba(255,215,0,0.1); color: var(--gold); box-shadow: 0 0 10px rgba(255,215,0,0.2); }
        .cell-num { font-size: 1.4rem; }
        .cell-label { font-size: 8px; text-transform: uppercase; margin-top: 2px; }
        .cell-planet { font-size: 7px; color: #aaa; font-weight: normal; }

        /* New Plane Analysis Styles */
        .analysis-card { text-align: left; padding: 12px; border-radius: 12px; margin-bottom: 8px; border-left: 4px solid var(--primary); font-size: 13px; background: rgba(255,255,255,0.05); }
        .active-plane { border-left-color: var(--success); background: rgba(74, 222, 128, 0.1); }
        .missing-plane { border-left-color: var(--danger); background: rgba(255, 77, 77, 0.05); }

        .element-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin-top: 15px; }
        .element-cell { padding: 10px 2px; border-radius: 10px; font-size: 9px; border: 1px solid rgba(255,255,255,0.1); font-weight: bold; }
        .el-present { background: rgba(74, 222, 128, 0.15); border-color: var(--success); color: var(--success); }
        .el-absent { background: rgba(255, 77, 77, 0.05); border-color: rgba(255, 77, 77, 0.3); color: #666; }

        .trait-list { text-align: left; padding: 0; list-style: none; }
        .trait-item { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; margin-bottom: 8px; border-left: 4px solid var(--primary); font-size: 13px; }
        .rem-item { border-left-color: var(--gold); background: rgba(255, 215, 0, 0.05); }

        table { width: 100%; border-collapse: collapse; font-size: 10px; margin-top: 10px; color: #ddd; }
        th, td { border: 1px solid rgba(255,255,255,0.1); padding: 8px; text-align: left; }
        th { background: rgba(0, 242, 255, 0.1); color: var(--primary); }
        
        #personalContent { display: none; }
    </style>
</head>
<body>

<header>
    <span id="hTitle">ASTRO ABHINASH üîØ</span><br>
    <button class="toggle-btn" onclick="toggleLanguage()">Odia / English</button>
</header>

<div class="container">
    <div class="box">
        <input type="text" id="userName" placeholder="Full Name">
        <input type="date" id="dob">
        <select id="gender">
            <option value="male">Male</option>
            <option value="female">Female</option>
        </select><br>
        <button class="calc-btn" id="btnGen" onclick="calculateMagic()">Generate Report</button>
    </div>

    <div id="personalContent">
        <div class="box">
            <h2 id="tAlignment" style="color:var(--primary); font-size: 18px; margin-bottom: 15px;">Number Alignment Dashboard</h2>
            <div class="alignment-grid">
                <div class="align-card"><span class="align-label" id="lblMulank">Mulank</span><span class="align-val" id="valMulank">0</span></div>
                <div class="align-card"><span class="align-label" id="lblBhagyank">Bhagyank</span><span class="align-val" id="valBhagyank">0</span></div>
                <div class="align-card"><span class="align-label" id="lblNameNo">Name No.</span><span class="align-val" id="valNameNo">0</span></div>
            </div>
            <div id="statusBox" class="status-bar"></div>
        </div>

        <div class="box">
            <h2 id="tInsights" style="color:var(--primary)">Personalized Insights</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 13px; text-align: left;">
                <div style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px;">
                    <b id="tFriends" style="color:var(--gold)">Friends:</b> <span id="valFriends"></span><br>
                    <b id="tEnemies" style="color:var(--danger)">Enemies:</b> <span id="valEnemies"></span>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px;">
                    <b>Today:</b> <span id="valToday" style="color:var(--primary); font-weight:bold;"></span><br>
                    <b>Month:</b> <span id="valMonth" style="color:var(--primary); font-weight:bold;"></span><br>
                    <b>Year:</b> <span id="valYear" style="color:var(--primary); font-weight:bold;"></span>
                </div>
            </div>
        </div>

        <div class="box">
            <h2 id="tGrid">Your Magic Grid</h2>
            <div class="loshu-grid" id="gridUI">
                <div class="grid-cell" id="c4"><span class="cell-num">4</span><span class="cell-planet">Rahu</span><span class="cell-label">Wealth</span></div>
                <div class="grid-cell" id="c9"><span class="cell-num">9</span><span class="cell-planet">Mars</span><span class="cell-label">Fame</span></div>
                <div class="grid-cell" id="c2"><span class="cell-num">2</span><span class="cell-planet">Moon</span><span class="cell-label">Love</span></div>
                <div class="grid-cell" id="c3"><span class="cell-num">3</span><span class="cell-planet">Jupiter</span><span class="cell-label">Health</span></div>
                <div class="grid-cell" id="c5"><span class="cell-num">5</span><span class="cell-planet">Mercury</span><span class="cell-label">Balance</span></div>
                <div class="grid-cell" id="c7"><span class="cell-num">7</span><span class="cell-planet">Ketu</span><span class="cell-label">Children</span></div>
                <div class="grid-cell" id="c8"><span class="cell-num">8</span><span class="cell-planet">Saturn</span><span class="cell-label">Wisdom</span></div>
                <div class="grid-cell" id="c1"><span class="cell-num">1</span><span class="cell-planet">Sun</span><span class="cell-label">Career</span></div>
                <div class="grid-cell" id="c6"><span class="cell-num">6</span><span class="cell-planet">Venus</span><span class="cell-label">Travel</span></div>
            </div>
        </div>

        <div class="box">
            <h2 id="tPlanesTitle" style="color:var(--success)">‚ö° Planes & Activation Analysis</h2>
            <div id="planesAnalysis"></div>
        </div>

        <div class="box">
            <h2 id="tElement">Pancha Tattva</h2>
            <div class="element-grid" id="elGrid">
                <div id="elWood" class="element-cell">WOOD<br>(3,4)</div>
                <div id="elFire" class="element-cell">FIRE<br>(9)</div>
                <div id="elEarth" class="element-cell">EARTH<br>(2,5,8)</div>
                <div id="elMetal" class="element-cell">METAL<br>(6,7)</div>
                <div id="elWater" class="element-cell">WATER<br>(1)</div>
            </div>
        </div>

        <div class="box">
            <h2 id="tKnowledge" style="color:var(--primary)">Loshu Plane Knowledge Table</h2>
            <table>
                <tr><th>Plane</th><th>Nums</th><th>Benefit</th></tr>
                <tr><td>Mental</td><td>4-9-2</td><td>Sharp Intellect & Logic</td></tr>
                <tr><td>Emotional</td><td>3-5-7</td><td>Intuition & Balanced Heart</td></tr>
                <tr><td>Practical</td><td>8-1-6</td><td>Hard Work & Stability</td></tr>
                <tr><td>Thought</td><td>4-3-8</td><td>Strategy & Vision</td></tr>
                <tr><td>Will</td><td>9-5-1</td><td>Determination & Power</td></tr>
                <tr><td>Action</td><td>2-7-6</td><td>Quick Execution</td></tr>
                <tr><td>Golden</td><td>4-5-6</td><td>Huge Wealth & Fortune</td></tr>
                <tr><td>Silver</td><td>2-5-8</td><td>Property & Assets</td></tr>
            </table>
        </div>

        <div class="box" style="border: 2px solid var(--primary); background: rgba(0, 242, 255, 0.05);">
            <h2 id="tMorning" style="color:var(--primary)">‚ö° Morning Activation</h2>
            <div id="morningRitual" style="font-size: 14px; line-height: 1.6; font-style: italic;"></div>
        </div>

        <div class="box">
            <h2 id="tRemedies" style="color:var(--gold)">üîÆ Vedic Solutions</h2>
            <div id="remedyList" class="trait-list"></div>
        </div>

        <a href="https://wa.me/917008186187?text=Hello%20Abhinash,%20I%20want%20to%20book%20a%20consultation" class="contact-btn" id="btnBook">Book Deep Consultation</a>
    </div>
</div>

<script>
    let currentLang = 'en';
    const chaldean = { a:1,i:1,j:1,q:1,y:1, b:2,k:2,r:2, c:3,g:3,l:3,s:3, d:4,m:4,t:4, e:5,h:5,n:5,x:5, u:6,v:6,w:6, o:7,z:7, f:8,p:8 };
    const planets = { 1:"Sun", 2:"Moon", 3:"Jupiter", 4:"Rahu", 5:"Mercury", 6:"Venus", 7:"Ketu", 8:"Saturn", 9:"Mars" };
    
    // Planes Data for Logic
    const planeDef = [
        { name: "Mental Plane", nums: [4,9,2], benefit: "Sharp Mind & Logic", activation: "Keep North-East area clean." },
        { name: "Emotional Plane", nums: [3,5,7], benefit: "Intuition & Feelings", activation: "Wear a silver ring or coin." },
        { name: "Practical Plane", nums: [8,1,6], benefit: "Solid Material Success", activation: "Wear a metal strap watch." },
        { name: "Thought Plane", nums: [4,3,8], benefit: "Strategy & Planning", activation: "Use yellow handkerchief." },
        { name: "Will Plane", nums: [9,5,1], benefit: "Determination & Success", activation: "Offer water to Sun daily." },
        { name: "Action Plane", nums: [2,7,6], benefit: "Fast Results & Execution", activation: "Use white/cream colors." },
        { name: "Golden Success", nums: [4,5,6], benefit: "Wealth & Fortune", activation: "Keep a green plant in NE." },
        { name: "Silver Assets", nums: [2,5,8], benefit: "Property & Stability", activation: "Tie black thread or wear metal watch." }
    ];

    const odiaData = {
        hTitle: "‡¨Ü‡¨∑‡≠ç‡¨ü‡≠ç‡¨∞‡≠ã ‡¨Ö‡¨≠‡¨ø‡¨®‡¨æ‡¨∂ üîØ", btnGen: "‡¨∞‡¨ø‡¨™‡≠ã‡¨∞‡≠ç‡¨ü ‡¨™‡≠ç‡¨∞‡¨∏‡≠ç‡¨§‡≠Å‡¨§ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å", tInsights: "‡¨¨‡≠ç‡≠ü‡¨ï‡≠ç‡¨§‡¨ø‡¨ó‡¨§ ‡¨¨‡¨ø‡¨¨‡¨∞‡¨£‡≠Ä", tFriends: "‡¨¨‡¨®‡≠ç‡¨ß‡≠Å ‡¨∏‡¨Ç‡¨ñ‡≠ç‡≠ü‡¨æ:", tEnemies: "‡¨∂‡¨§‡≠ç‡¨∞‡≠Å ‡¨∏‡¨Ç‡¨ñ‡≠ç‡≠ü‡¨æ:", 
        tGrid: "‡¨Ü‡¨™‡¨£‡¨ô‡≠ç‡¨ï ‡¨Æ‡≠ç‡≠ü‡¨æ‡¨ú‡¨ø‡¨ï ‡¨ó‡≠ç‡¨∞‡≠Ä‡¨°‡≠ç", tElement: "‡¨™‡¨û‡≠ç‡¨ö ‡¨§‡¨§‡≠ç‡¨§‡≠ç‡≠±", tMorning: "‚ö° ‡¨∏‡¨ï‡¨æ‡¨≥‡¨∞ ‡¨ï‡¨∞‡≠ç‡¨§‡≠ç‡¨§‡¨¨‡≠ç‡≠ü", tRemedies: "üîÆ ‡¨¨‡≠à‡¨¶‡¨ø‡¨ï ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞", btnBook: "‡¨Ö‡¨ß‡¨ø‡¨ï ‡¨™‡¨∞‡¨æ‡¨Æ‡¨∞‡≠ç‡¨∂ ‡¨™‡¨æ‡¨á‡¨Å ‡¨Ø‡≠ã‡¨ó‡¨æ‡¨Ø‡≠ã‡¨ó ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å",
        tAlignment: "‡¨∏‡¨Ç‡¨ñ‡≠ç‡≠ü‡¨æ ‡¨Ü‡¨≤‡¨æ‡¨á‡¨®‡≠ç‡¨Æ‡≠á‡¨£‡≠ç‡¨ü ‡¨°‡≠ç‡≠ü‡¨æ‡¨∏‡¨¨‡≠ã‡¨∞‡≠ç‡¨°", lblMulank: "‡¨Æ‡≠Ç‡¨≥‡¨æ‡¨ô‡≠ç‡¨ï", lblBhagyank: "‡¨≠‡¨æ‡¨ó‡≠ç‡≠ü‡¨æ‡¨ô‡≠ç‡¨ï", lblNameNo: "‡¨®‡¨æ‡¨Æ ‡¨∏‡¨Ç‡¨ñ‡≠ç‡≠ü‡¨æ"
    };

    const engData = {
        hTitle: "ASTRO ABHINASH üîØ", btnGen: "Generate Report", tInsights: "Personalized Insights", tFriends: "Friends:", tEnemies: "Enemies:", 
        tGrid: "Your Magic Grid", tElement: "Pancha Tattva", tMorning: "‚ö° Morning Activation", tRemedies: "üîÆ Vedic Solutions", btnBook: "Book Deep Consultation",
        tAlignment: "Number Alignment Dashboard", lblMulank: "Mulank", lblBhagyank: "Bhagyank", lblNameNo: "Name No."
    };

    const adviceM = {
        1: "Focus on leadership but avoid ego.", 2: "Trust your intuition but stay emotionally strong.", 3: "Expand your knowledge and share with others.", 4: "Stay disciplined to achieve sudden wealth.", 5: "Communication is your key to business success.", 6: "Luxury is coming; focus on family and art.", 7: "Research and spirituality will guide you.", 8: "Hard work will bring permanent success.", 9: "Use your energy for humanitarian causes."
    };

    const adviceB = {
        1: "Your destiny is to rule and lead the way.", 2: "Peace and cooperation are your life's path.", 3: "You are destined to be a teacher or advisor.", 4: "Your life involves struggle followed by massive gains.", 5: "Adaptability and travel will bring fortune.", 6: "You are born for a comfortable and loving life.", 7: "Mysteries and deep thinking define your journey.", 8: "Material success comes through patience and justice.", 9: "You are a warrior for a better world."
    };

    const remediesOdia = {
        1: "‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨§‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨™‡¨æ‡¨§‡≠ç‡¨∞‡¨∞‡≠á ‡¨™‡¨æ‡¨£‡¨ø ‡¨™‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨∏‡≠Ç‡¨∞‡≠ç‡¨Ø‡≠ç‡≠ü‡¨ô‡≠ç‡¨ï‡≠Å ‡¨ú‡¨≥ ‡¨Ö‡¨∞‡≠ç‡¨™‡¨£ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |",
        2: "‡¨ö‡¨®‡≠ç‡¨¶‡≠ç‡¨∞ ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨™‡¨ï‡≠á‡¨ü‡¨∞‡≠á ‡¨è‡¨ï ‡¨∞‡≠Ç‡¨™‡¨æ ‡¨Æ‡≠Å‡¨¶‡≠ç‡¨∞‡¨æ ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨Æ‡¨æ‡¨Ü‡¨ô‡≠ç‡¨ï‡≠Å ‡¨∏‡¨Æ‡≠ç‡¨Æ‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |",
        3: "‡¨¨‡≠É‡¨π‡¨∏‡≠ç‡¨™‡¨§‡¨ø ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨ï‡≠á‡¨∂‡¨∞ ‡¨§‡¨ø‡¨≥‡¨ï ‡¨≤‡¨ó‡¨æ‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨ó‡≠Å‡¨∞‡≠Å‡¨ú‡¨®‡¨ô‡≠ç‡¨ï‡≠Å ‡¨∏‡¨Æ‡≠ç‡¨Æ‡¨æ‡¨® ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |",
        4: "‡¨∞‡¨æ‡¨π‡≠Å ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨™‡¨ï‡≠ç‡¨∑‡≠Ä‡¨ô‡≠ç‡¨ï‡≠Å ‡¨¶‡¨æ‡¨®‡¨æ ‡¨¶‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨ò‡¨∞ ‡¨∏‡¨´‡¨æ ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å |",
        5: "‡¨¨‡≠Å‡¨ß ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨¨‡≠Å‡¨ß‡¨¨‡¨æ‡¨∞ ‡¨¶‡¨ø‡¨® ‡¨ó‡¨æ‡¨à‡¨ï‡≠Å ‡¨ò‡¨æ‡¨∏ ‡¨ñ‡¨æ‡¨á‡¨¨‡¨æ‡¨ï‡≠Å ‡¨¶‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡≠Å |",
        6: "‡¨∂‡≠Å‡¨ï‡≠ç‡¨∞ ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨∏‡≠Å‡¨ó‡¨®‡≠ç‡¨ß ‡¨¨‡≠ç‡≠ü‡¨¨‡¨π‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å ‡¨è‡¨¨‡¨Ç ‡¨ß‡¨≥‡¨æ ‡¨™‡≠ã‡¨∑‡¨æ‡¨ï ‡¨™‡¨ø‡¨®‡≠ç‡¨ß‡¨®‡≠ç‡¨§‡≠Å |",
        7: "‡¨ï‡≠á‡¨§‡≠Å ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨ï‡≠Å‡¨ï‡≠Å‡¨∞‡¨ô‡≠ç‡¨ï‡≠Å ‡¨ñ‡¨æ‡¨á‡¨¨‡¨æ‡¨ï‡≠Å ‡¨¶‡¨ø‡¨Ö‡¨®‡≠ç‡¨§‡≠Å |",
        8: "‡¨∂‡¨®‡¨ø ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨∂‡¨®‡¨ø‡¨¨‡¨æ‡¨∞ ‡¨∏‡¨®‡≠ç‡¨ß‡≠ç‡≠ü‡¨æ‡¨∞‡≠á ‡¨ì‡¨∏‡≠ç‡¨§ ‡¨ó‡¨õ ‡¨Æ‡≠Ç‡¨≥‡≠á ‡¨¶‡≠Ä‡¨™ ‡¨ú‡¨æ‡¨≥‡¨®‡≠ç‡¨§‡≠Å |",
        9: "‡¨Æ‡¨ô‡≠ç‡¨ó‡¨≥ ‡¨™‡≠ç‡¨∞‡¨§‡¨ø‡¨ï‡¨æ‡¨∞: ‡¨π‡¨®‡≠Å‡¨Æ‡¨æ‡¨® ‡¨ö‡¨æ‡¨≥‡¨ø‡¨∂‡¨æ ‡¨™‡¨æ‡¨† ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |",
        Wood: "üå≥ ‡¨â‡¨§‡≠ç‡¨§‡¨∞-‡¨™‡≠Ç‡¨∞‡≠ç‡¨¨ ‡¨¶‡¨ø‡¨ó‡¨∞‡≠á ‡¨è‡¨ï ‡¨õ‡≠ã‡¨ü ‡¨∏‡¨¨‡≠Å‡¨ú ‡¨ó‡¨õ ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å |", Fire: "üî• ‡¨¶‡¨ï‡≠ç‡¨∑‡¨ø‡¨£ ‡¨¶‡¨ø‡¨ó‡¨∞‡≠á ‡¨è‡¨ï ‡¨®‡¨æ‡¨≤‡¨ø ‡¨¶‡≠Ä‡¨™ ‡¨ú‡¨æ‡¨≥‡¨®‡≠ç‡¨§‡≠Å |", Earth: "‚õ∞Ô∏è ‡¨π‡¨≥‡¨¶‡¨ø‡¨Ü ‡¨∞‡¨ô‡≠ç‡¨ó‡¨∞ ‡¨∞‡≠Å‡¨Æ‡¨æ‡¨≤ ‡¨¨‡≠ç‡≠ü‡¨¨‡¨π‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å |", Metal: "‚öîÔ∏è ‡¨∞‡≠Ç‡¨™‡¨æ ‡¨ö‡≠Å‡¨°‡¨º‡¨ø ‡¨ï‡¨ø‡¨Æ‡≠ç‡¨¨‡¨æ ‡¨∑‡≠ç‡¨ü‡¨ø‡¨≤‡≠ç ‡¨ò‡¨£‡≠ç‡¨ü‡¨æ ‡¨™‡¨ø‡¨®‡≠ç‡¨ß‡¨®‡≠ç‡¨§‡≠Å |", Water: "üíß ‡¨â‡¨§‡≠ç‡¨§‡¨∞ ‡¨¶‡¨ø‡¨ó‡¨∞‡≠á ‡¨™‡¨∞‡¨ø‡¨∑‡≠ç‡¨ï‡¨æ‡¨∞ ‡¨™‡¨æ‡¨£‡¨ø ‡¨è‡¨ï ‡¨™‡¨æ‡¨§‡≠ç‡¨∞‡¨∞‡≠á ‡¨∞‡¨ñ‡¨®‡≠ç‡¨§‡≠Å |"
    };

    const remediesEng = {
        1: "Sun: Drink water in copper and offer Arghya to Sun.", 2: "Moon: Keep a silver coin and respect your mother.", 3: "Jupiter: Apply saffron tilak and respect elders.", 4: "Rahu: Feed birds and keep home clutter-free.", 5: "Mercury: Feed green grass to cows on Wednesdays.", 6: "Venus: Use perfumes and wear clean clothes.", 7: "Ketu: Feed multi-colored dogs or birds.", 8: "Saturn: Light mustard oil lamp under Peepal tree on Saturdays.", 9: "Mars: Recite Hanuman Chalisa daily.",
        Wood: "üå≥ Place a small green plant in North-East.", Fire: "üî• Light a red diya in South direction.", Earth: "‚õ∞Ô∏è Use a yellow handkerchief.", Metal: "‚öîÔ∏è Wear a metal watch or silver bangle.", Water: "üíß Keep fresh water in a bowl in North."
    };

    function toggleLanguage() {
        currentLang = currentLang === 'en' ? 'or' : 'en';
        let data = currentLang === 'en' ? engData : odiaData;
        for (let key in data) { if(document.getElementById(key)) document.getElementById(key).innerText = data[key]; }
        if (document.getElementById("personalContent").style.display === "block") calculateMagic();
    }

    function reduce(n) { return (n == 0) ? 0 : (n % 9 == 0 ? 9 : n % 9); }

    function calculateMagic() {
        const name = document.getElementById("userName").value;
        const dobVal = document.getElementById("dob").value;
        if (!dobVal) return;
        let d = new Date(dobVal);
        let day = d.getDate(), month = d.getMonth() + 1, year = d.getFullYear();
        let m = reduce(day), b = reduce(day + month + year);
        
        let nTotal = 0;
        name.toLowerCase().replace(/\s/g, '').split('').forEach(char => { nTotal += chaldean[char] || 0; });
        let n = reduce(nTotal);

        let now = new Date();
        let py = reduce(reduce(day) + reduce(month) + reduce(now.getFullYear()));
        let pm = reduce(py + (now.getMonth() + 1));
        let pd = reduce(pm + now.getDate());

        document.getElementById("personalContent").style.display = "block";
        document.getElementById("valMulank").innerText = m;
        document.getElementById("valBhagyank").innerText = b;
        document.getElementById("valNameNo").innerText = n;
        document.getElementById("valToday").innerText = pd;
        document.getElementById("valMonth").innerText = pm;
        document.getElementById("valYear").innerText = py;
        
        let rel = {1:{f:[2,3,5,9],e:[8]},2:{f:[1,3,5],e:[4,8,9]},3:{f:[1,2,5,7,9],e:[6]},4:{f:[5,6,7,8],e:[1,2,9]},5:{f:[1,3,4,6,7,8,9],e:[2]},6:{f:[4,5,7,8],e:[3]},7:{f:[3,4,5,6],e:[8,9]},8:{f:[4,5,6,7],e:[1,2,9]},9:{f:[1,2,3,5],e:[4,7,8]}};
        document.getElementById("valFriends").innerText = rel[m].f.join(", ");
        document.getElementById("valEnemies").innerText = rel[m].e.join(", ");

        let isAligned = rel[m].f.includes(n) || m === n;
        let statusBox = document.getElementById("statusBox");
        if(isAligned) {
            statusBox.innerText = "‚úÖ Name is Aligned with Mulank!";
            statusBox.style.background = "rgba(74, 222, 128, 0.2)";
            statusBox.style.color = "var(--success)";
        } else {
            statusBox.innerText = "‚ö†Ô∏è Name Alignment Needed with Mulank!";
            statusBox.style.background = "rgba(255, 77, 77, 0.2)";
            statusBox.style.color = "var(--danger)";
        }

        let gridStr = day.toString() + month.toString() + year.toString() + m.toString() + b.toString();
        let rListHtml = "";
        let remData = currentLang === 'en' ? remediesEng : remediesOdia;

        rListHtml += `<div class="trait-item" style="border-left-color:var(--gold)"><b>Mulank ${m} Advice:</b> ${adviceM[m]}</div>`;
        rListHtml += `<div class="trait-item" style="border-left-color:var(--gold)"><b>Bhagyank ${b} Advice:</b> ${adviceB[b]}</div>`;

        // Elements
        const elMap = { Wood:[3,4], Fire:[9], Earth:[2,5,8], Metal:[6,7], Water:[1] };
        for (let el in elMap) {
            let hasEl = elMap[el].some(num => gridStr.includes(num.toString()));
            document.getElementById("el" + el).className = "element-cell " + (hasEl ? "el-present" : "el-absent");
            if (!hasEl) rListHtml += `<div class="trait-item rem-item">${remData[el]}</div>`;
        }

        // Update Grid UI
        for(let i=1; i<=9; i++) {
            let cell = document.getElementById("c"+i);
            if(gridStr.includes(i)) { 
                cell.classList.add("filled"); 
            } else { 
                cell.classList.remove("filled"); 
                rListHtml += `<div class="trait-item"><b>${planets[i]}:</b> ${remData[i]}</div>`; 
            }
        }

        // --- NEW PLANES LOGIC MERGED HERE ---
        let analysisHtml = "";
        planeDef.forEach(p => {
            let found = p.nums.filter(n => gridStr.includes(n.toString()));
            let missing = p.nums.filter(n => !gridStr.includes(n.toString()));

            if (found.length === 3) {
                analysisHtml += `<div class="analysis-card active-plane"><b>‚úÖ ACTIVE: ${p.name}</b><br>Benefit: ${p.benefit}</div>`;
            } else if (found.length > 0) {
                analysisHtml += `<div class="analysis-card missing-plane"><b>‚ö†Ô∏è INCOMPLETE: ${p.name}</b><br>
                <i>Missing: ${missing.join(", ")}</i><br>
                <b>How to Activate:</b> ${p.activation}<br>
                <b>Benefit after Activation:</b> ${p.benefit}</div>`;
            }
        });
        document.getElementById("planesAnalysis").innerHTML = analysisHtml;
        // --- END OF PLANES LOGIC ---

        document.getElementById("remedyList").innerHTML = rListHtml;
        document.getElementById("morningRitual").innerHTML = `<b>Today's Planet: ${planets[pd]}</b><br>${remData[pd]}`;
    }
</script>
</body>
</html>
