<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abinash Astro Guide | Decode Your Stars</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        body { font-family: 'Outfit', sans-serif; background: #02040a; color: #ffffff; overflow-x: hidden; }
        .font-serif { font-family: 'Cinzel', serif; }
        
        .bg-glow {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #02040a 100%);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 2.5rem;
        }

        .gold-text {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .btn-magic {
            background: linear-gradient(45deg, #d97706, #f59e0b);
            box-shadow: 0 10px 25px -5px rgba(217, 119, 6, 0.4);
            transition: all 0.4s ease;
        }

        /* Loading Spinner */
        .spinner {
            width: 20px; height: 20px; border: 3px solid rgba(0,0,0,0.1);
            border-top: 3px solid black; border-radius: 50%;
            animation: spin 0.8s linear infinite; display: none;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <header class="p-8 flex justify-between items-center max-w-xl mx-auto">
        <div>
            <h1 class="font-serif text-xl tracking-[0.2em] gold-text">ABINASH</h1>
            <p class="text-[10px] tracking-[0.4em] text-gray-500 uppercase">Astro Guide</p>
        </div>
        <div class="text-[10px] border border-white/10 px-3 py-1 rounded-full text-gray-400">V 2.0</div>
    </header>

    <main class="max-w-xl mx-auto px-6 pb-20">
        <div class="text-center mb-10 pt-4">
            <h2 class="text-4xl font-semibold mb-4 leading-tight">Stars are talking. <br> Are you listening?</h2>
            <p class="text-gray-400 text-sm">Vedic, KP & Numerology Insights</p>
        </div>

        <div class="glass-card p-10 relative overflow-hidden shadow-2xl">
            <div class="absolute -top-20 -left-20 w-40 h-40 bg-amber-500/10 rounded-full blur-[80px]"></div>
            
            <div class="space-y-6 relative z-10">
                <div>
                    <label class="block text-[10px] uppercase tracking-widest text-amber-500 font-bold mb-3">Your Full Name</label>
                    <input type="text" id="nameInp" placeholder="Enter name" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 outline-none focus:border-amber-500 transition-all">
                </div>

                <div>
                    <label class="block text-[10px] uppercase tracking-widest text-amber-500 font-bold mb-3">Birth Date</label>
                    <input type="date" id="dobInp" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 outline-none focus:border-amber-500 transition-all text-gray-300">
                </div>

                <button onclick="processDestiny()" id="mainBtn" class="w-full btn-magic text-black font-bold py-5 rounded-2xl uppercase tracking-[0.1em] text-xs mt-4 flex justify-center items-center gap-2">
                    <span id="btnText">Reveal My Destiny ðŸ”®</span>
                    <div id="loader" class="spinner"></div>
                </button>
            </div>
        </div>
    </main>

    <div id="destinyModal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-6">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-2xl"></div>
        <div class="glass-card max-w-sm w-full p-10 text-center relative z-10 border-amber-500/20">
            <div id="numberDisplay" class="text-8xl font-serif gold-text font-bold mb-2">0</div>
            <h3 id="nameDisplay" class="text-xl font-bold mb-6 tracking-tight"></h3>
            
            <div class="bg-white/5 p-6 rounded-3xl mb-8 border border-white/10">
                <p id="insightText" class="text-sm text-gray-300 leading-relaxed italic"></p>
            </div>

            <div class="space-y-4">
                <a href="https://wa.me/YOUR_NUMBER?text=Hi Abinash, I want my full KP Report" class="block w-full btn-magic text-black font-bold py-4 rounded-xl text-[10px] uppercase tracking-widest text-center">Unlock Full Report (â‚¹99)</a>
                <button onclick="closeModal()" class="text-gray-500 text-[10px] uppercase tracking-widest hover:text-white transition">Close</button>
            </div>
        </div>
    </div>

    <script>
        // --- 1. FIREBASE CONFIG ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "abinash-astro.firebaseapp.com",
            projectId: "abinash-astro",
            storageBucket: "abinash-astro.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // --- 2. ASTRO DATA ---
        const descriptions = {
            1: "The Leader: Born to rule. Sun's power is with you.",
            2: "The Empath: Your intuition is your superpower.",
            3: "The Guru: A storehouse of wisdom and creativity.",
            4: "The Architect: Discipline will build your empire.",
            5: "The Free Spirit: Adventure and change are your fuel.",
            6: "The Nurturer: Love and luxury follow your path.",
            7: "The Seeker: You find truth in the deepest waters.",
            8: "The Achiever: Power comes after the struggle.",
            9: "The Warrior: Fearless heart for a global cause."
        };

        // --- 3. MAIN LOGIC ---
        function processDestiny() {
            const name = document.getElementById('nameInp').value;
            const dob = document.getElementById('dobInp').value;
            const btnText = document.getElementById('btnText');
            const loader = document.getElementById('loader');

            if(!name || !dob) { alert("Details please!"); return; }

            // Loading state
            btnText.style.display = 'none';
            loader.style.display = 'block';

            // Calculate Magic Number
            let digits = dob.replace(/-/g, '');
            let sum = digits.split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
            while (sum > 9) sum = sum.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);

            // SAVE TO FIREBASE
            db.collection("leads").add({
                name: name,
                dob: dob,
                magicNumber: sum,
                dateCreated: new Date().toISOString(),
                status: "FreeUser"
            }).then(() => {
                // Show Result
                document.getElementById('numberDisplay').innerText = sum;
                document.getElementById('nameDisplay').innerText = `Namaste, ${name}`;
                document.getElementById('insightText').innerText = descriptions[sum];
                
                setTimeout(() => {
                    document.getElementById('destinyModal').classList.remove('hidden');
                    btnText.style.display = 'block';
                    loader.style.display = 'none';
                }, 800);
            }).catch((err) => {
                alert("Connection error. Try again!");
                btnText.style.display = 'block';
                loader.style.display = 'none';
            });
        }

        function closeModal() {
            document.getElementById('destinyModal').classList.add('hidden');
        }
    </script>
</body>
</html>
