<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abinash Astro Guide | Personal Destiny</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Outfit', sans-serif; background: #02040a; color: #ffffff; overflow-x: hidden; }
        .font-serif { font-family: 'Cinzel', serif; }
        .bg-glow {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #02040a 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 2.5rem;
        }
        .gold-text {
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .btn-magic {
            background: linear-gradient(45deg, #d97706, #f59e0b);
            transition: all 0.4s ease;
        }
        .spinner {
            width: 20px; height: 20px; border: 3px solid rgba(0,0,0,0.1);
            border-top: 3px solid white; border-radius: 50%;
            animation: spin 0.8s linear infinite; display: none;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="bg-glow"></div>

    <header class="p-8 flex justify-between items-center max-w-xl mx-auto">
        <div>
            <h1 class="font-serif text-xl tracking-[0.2em] gold-text">ABINASH</h1>
            <p class="text-[10px] tracking-[0.4em] text-gray-500 uppercase">Astro Guide</p>
        </div>
    </header>

    <main class="max-w-xl mx-auto px-6 pb-20">
        <div class="text-center mb-10 pt-4">
            <h2 class="text-4xl font-semibold mb-4 leading-tight">Stars are talking.</h2>
            <p class="text-gray-400 text-sm italic">"Aapka bhavishya aapke numbers mein chhupa hai"</p>
        </div>

        <div class="glass-card p-10 relative shadow-2xl">
            <div class="space-y-6">
                <div>
                    <label class="block text-[10px] uppercase tracking-widest text-amber-500 font-bold mb-3 font-bold">Your Name</label>
                    <input type="text" id="nameInp" placeholder="Enter name" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 outline-none focus:border-amber-500 transition-all">
                </div>
                <div>
                    <label class="block text-[10px] uppercase tracking-widest text-amber-500 font-bold mb-3 font-bold">Birth Date</label>
                    <input type="date" id="dobInp" class="w-full bg-white/5 p-4 rounded-2xl border border-white/10 outline-none focus:border-amber-500 transition-all">
                </div>
                <button id="mainBtn" class="w-full btn-magic text-black font-bold py-5 rounded-2xl uppercase tracking-[0.1em] text-xs mt-4 flex justify-center items-center gap-2">
                    <span id="btnText">Reveal My Destiny ðŸ”®</span>
                    <div id="loader" class="spinner"></div>
                </button>
            </div>
        </div>
    </main>

    <div id="destinyModal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-6">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-2xl"></div>
        <div class="glass-card max-w-sm w-full p-10 text-center relative z-10 border-amber-500/20">
            <div id="numberDisplay" class="text-8xl font-serif gold-text font-bold mb-2">0</div>
            <h3 id="nameDisplay" class="text-xl font-bold mb-6 tracking-tight italic gold-text"></h3>
            <div class="bg-white/5 p-6 rounded-3xl mb-8 border border-white/10">
                <p id="insightText" class="text-sm text-gray-300 leading-relaxed italic"></p>
            </div>
            <button onclick="window.location.reload()" class="text-gray-500 text-[10px] uppercase tracking-widest hover:text-white transition">Check Another</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC0yF3kviJ6U-rdOMUyAOOQyTgSFoWG6co",
            authDomain: "astro-c7b1e.firebaseapp.com",
            projectId: "astro-c7b1e",
            storageBucket: "astro-c7b1e.firebasestorage.app",
            messagingSenderId: "885607895929",
            appId: "1:885607895929:web:8f1bf85f7d8aab1b1d55a8"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const descriptions = {
            1: "The Leader: Sun's energy guides you. Born to rule.",
            2: "The Empath: Moon's intuition. You feel deeper than others.",
            3: "The Guru: Jupiter's wisdom. Knowledge is your wealth.",
            4: "The Architect: Rahu's focus. You create stability.",
            5: "The Traveler: Mercury's speed. Communication is your tool.",
            6: "The Nurturer: Venus's luxury. Beauty and love follow you.",
            7: "The Mystic: Ketu's depth. Spiritual and analytical soul.",
            8: "The Boss: Saturn's power. Massive success after hard work.",
            9: "The Warrior: Mars's passion. Fearless and helpful soul."
        };

        async function processDestiny() {
            const name = document.getElementById('nameInp').value;
            const dob = document.getElementById('dobInp').value;
            const btnText = document.getElementById('btnText');
            const loader = document.getElementById('loader');

            if(!name || !dob) { alert("Please enter name and date!"); return; }

            // UI Loading
            btnText.style.display = 'none';
            loader.style.display = 'block';

            // Calc Magic Number
            let digits = dob.replace(/-/g, '');
            let sum = digits.split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);
            while (sum > 9) sum = sum.toString().split('').reduce((a, b) => parseInt(a) + parseInt(b), 0);

            try {
                // Save to Firestore
                await addDoc(collection(db, "leads"), {
                    name: name,
                    dob: dob,
                    magicNumber: sum,
                    createdAt: new Date()
                });

                // Display UI
                document.getElementById('numberDisplay').innerText = sum;
                document.getElementById('nameDisplay').innerText = `Namaste, ${name}`;
                document.getElementById('insightText').innerText = descriptions[sum];
                document.getElementById('destinyModal').classList.remove('hidden');

            } catch (e) {
                console.error("Error: ", e);
                alert("Database error! Check your Firestore rules.");
            } finally {
                btnText.style.display = 'block';
                loader.style.display = 'none';
            }
        }

        // Attach function to button
        document.getElementById('mainBtn').addEventListener('click', processDestiny);
    </script>
</body>
</html>
